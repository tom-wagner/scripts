const analyzedPicks = [
    {
        "player": "Jalen Williams",
        "statCategory": "Points",
        "dkLine": 18.5,
        "probabilityOver": "0.512",
        "probabilityUnder": "0.488",
        "moreDraftableId": 50637764,
        "lessDraftableId": 50637765,
        "summaryMore": "50637764: Jalen Williams / OVER 18.5 Points / 51.2%",
        "summaryLess": "50637765: Jalen Williams / UNDER 18.5 Points / 48.8%",
        "maxProb": 0.5122,
        "etrLine": 19.2,
        "diff": 0.6999999999999993,
        "percentageDiff": 0.0378378378378378,
        "etrPoints": 19.2,
        "etrAssists": 5.4,
        "etrRebounds": 4.9,
        "etrThreePtMade": 1.6,
        "etrTurnovers": 1.68,
        "etrSteals": 1.48,
        "etrBlocks": 0.79,
        "etrMinutes": 32.5,
        "etrPosition": "PF/SF",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Jalen Williams",
        "statCategory": "Points + Rebounds",
        "dkLine": 23.5,
        "probabilityOver": "0.502",
        "probabilityUnder": "0.498",
        "moreDraftableId": 50637798,
        "lessDraftableId": 50637799,
        "summaryMore": "50637798: Jalen Williams / OVER 23.5 Points + Rebounds / 50.2%",
        "summaryLess": "50637799: Jalen Williams / UNDER 23.5 Points + Rebounds / 49.8%",
        "maxProb": 0.5024,
        "etrLine": 24.1,
        "diff": 0.6000000000000014,
        "percentageDiff": 0.025531914893617082,
        "etrPoints": 19.2,
        "etrAssists": 5.4,
        "etrRebounds": 4.9,
        "etrThreePtMade": 1.6,
        "etrTurnovers": 1.68,
        "etrSteals": 1.48,
        "etrBlocks": 0.79,
        "etrMinutes": 32.5,
        "etrPosition": "PF/SF",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Jalen Williams",
        "statCategory": "Points + Assists",
        "dkLine": 23.5,
        "probabilityOver": "0.531",
        "probabilityUnder": "0.469",
        "moreDraftableId": 50637800,
        "lessDraftableId": 50637801,
        "summaryMore": "50637800: Jalen Williams / OVER 23.5 Points + Assists / 53.1%",
        "summaryLess": "50637801: Jalen Williams / UNDER 23.5 Points + Assists / 46.9%",
        "maxProb": 0.531,
        "etrLine": 24.6,
        "diff": 1.1000000000000014,
        "percentageDiff": 0.04680851063829793,
        "etrPoints": 19.2,
        "etrAssists": 5.4,
        "etrRebounds": 4.9,
        "etrThreePtMade": 1.6,
        "etrTurnovers": 1.68,
        "etrSteals": 1.48,
        "etrBlocks": 0.79,
        "etrMinutes": 32.5,
        "etrPosition": "PF/SF",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Jalen Williams",
        "statCategory": "Points + Assists + Rebounds",
        "dkLine": 28.5,
        "probabilityOver": "0.528",
        "probabilityUnder": "0.472",
        "moreDraftableId": 50637816,
        "lessDraftableId": 50637817,
        "summaryMore": "50637816: Jalen Williams / OVER 28.5 Points + Assists + Rebounds / 52.8%",
        "summaryLess": "50637817: Jalen Williams / UNDER 28.5 Points + Assists + Rebounds / 47.3%",
        "maxProb": 0.5275000000000001,
        "etrLine": 29.5,
        "diff": 1,
        "percentageDiff": 0.03508771929824561,
        "etrPoints": 19.2,
        "etrAssists": 5.4,
        "etrRebounds": 4.9,
        "etrThreePtMade": 1.6,
        "etrTurnovers": 1.68,
        "etrSteals": 1.48,
        "etrBlocks": 0.79,
        "etrMinutes": 32.5,
        "etrPosition": "PF/SF",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Derrick Jones Jr.",
        "statCategory": "Points",
        "dkLine": 10.5,
        "probabilityOver": "0.491",
        "probabilityUnder": "0.509",
        "moreDraftableId": 50637766,
        "lessDraftableId": 50637767,
        "summaryMore": "50637766: Derrick Jones Jr. / OVER 10.5 Points / 49.1%",
        "summaryLess": "50637767: Derrick Jones Jr. / UNDER 10.5 Points / 50.9%",
        "maxProb": 0.5092,
        "etrLine": 10.8,
        "diff": 0.3000000000000007,
        "percentageDiff": 0.02857142857142864,
        "etrPoints": 10.8,
        "etrAssists": 0.9,
        "etrRebounds": 3.9,
        "etrThreePtMade": 1.2,
        "etrTurnovers": 1.28,
        "etrSteals": 0.9,
        "etrBlocks": 0.83,
        "etrMinutes": 29,
        "etrPosition": "SF/PF",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Derrick Jones Jr.",
        "statCategory": "Points + Rebounds",
        "dkLine": 14.5,
        "probabilityOver": "0.483",
        "probabilityUnder": "0.517",
        "moreDraftableId": 50637820,
        "lessDraftableId": 50637821,
        "summaryMore": "50637820: Derrick Jones Jr. / OVER 14.5 Points + Rebounds / 48.3%",
        "summaryLess": "50637821: Derrick Jones Jr. / UNDER 14.5 Points + Rebounds / 51.7%",
        "maxProb": 0.5171,
        "etrLine": 14.700000000000001,
        "diff": 0.20000000000000107,
        "percentageDiff": 0.013793103448275935,
        "etrPoints": 10.8,
        "etrAssists": 0.9,
        "etrRebounds": 3.9,
        "etrThreePtMade": 1.2,
        "etrTurnovers": 1.28,
        "etrSteals": 0.9,
        "etrBlocks": 0.83,
        "etrMinutes": 29,
        "etrPosition": "SF/PF",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Assists",
        "dkLine": 2.5,
        "probabilityOver": "0.467",
        "probabilityUnder": "0.533",
        "moreDraftableId": 50637768,
        "lessDraftableId": 50637769,
        "summaryMore": "50637768: Chet Holmgren / OVER 2.5 Assists / 46.7%",
        "summaryLess": "50637769: Chet Holmgren / UNDER 2.5 Assists / 53.3%",
        "maxProb": 0.5327,
        "etrLine": 2.6,
        "diff": 0.10000000000000009,
        "percentageDiff": 0.040000000000000036,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Points",
        "dkLine": 17.5,
        "probabilityOver": "0.438",
        "probabilityUnder": "0.563",
        "moreDraftableId": 50637770,
        "lessDraftableId": 50637771,
        "summaryMore": "50637770: Chet Holmgren / OVER 17.5 Points / 43.8%",
        "summaryLess": "50637771: Chet Holmgren / UNDER 17.5 Points / 56.3%",
        "maxProb": 0.5625,
        "etrLine": 17,
        "diff": -0.5,
        "percentageDiff": -0.02857142857142857,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Rebounds",
        "dkLine": 9.5,
        "probabilityOver": "0.472",
        "probabilityUnder": "0.528",
        "moreDraftableId": 50637786,
        "lessDraftableId": 50637787,
        "summaryMore": "50637786: Chet Holmgren / OVER 9.5 Rebounds / 47.2%",
        "summaryLess": "50637787: Chet Holmgren / UNDER 9.5 Rebounds / 52.8%",
        "maxProb": 0.5276,
        "etrLine": 9.6,
        "diff": 0.09999999999999964,
        "percentageDiff": 0.010526315789473648,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Blocks",
        "dkLine": 2.5,
        "probabilityOver": "0.336",
        "probabilityUnder": "0.664",
        "moreDraftableId": 50637790,
        "lessDraftableId": 50637791,
        "summaryMore": "50637790: Chet Holmgren / OVER 2.5 Blocks / 33.6%",
        "summaryLess": "50637791: Chet Holmgren / UNDER 2.5 Blocks / 66.4%",
        "maxProb": 0.6636,
        "etrLine": 2.04,
        "diff": -0.45999999999999996,
        "percentageDiff": -0.184,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Points + Assists + Rebounds",
        "dkLine": 29.5,
        "probabilityOver": "0.460",
        "probabilityUnder": "0.540",
        "moreDraftableId": 50637802,
        "lessDraftableId": 50637803,
        "summaryMore": "50637802: Chet Holmgren / OVER 29.5 Points + Assists + Rebounds / 46.0%",
        "summaryLess": "50637803: Chet Holmgren / UNDER 29.5 Points + Assists + Rebounds / 54.0%",
        "maxProb": 0.5396,
        "etrLine": 29.200000000000003,
        "diff": -0.29999999999999716,
        "percentageDiff": -0.010169491525423633,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Points + Rebounds",
        "dkLine": 27.5,
        "probabilityOver": "0.433",
        "probabilityUnder": "0.567",
        "moreDraftableId": 50637808,
        "lessDraftableId": 50637809,
        "summaryMore": "50637808: Chet Holmgren / OVER 27.5 Points + Rebounds / 43.3%",
        "summaryLess": "50637809: Chet Holmgren / UNDER 27.5 Points + Rebounds / 56.7%",
        "maxProb": 0.5671,
        "etrLine": 26.6,
        "diff": -0.8999999999999986,
        "percentageDiff": -0.032727272727272674,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Chet Holmgren",
        "statCategory": "Points + Assists",
        "dkLine": 19.5,
        "probabilityOver": "0.476",
        "probabilityUnder": "0.524",
        "moreDraftableId": 50638384,
        "lessDraftableId": 50638385,
        "summaryMore": "50638384: Chet Holmgren / OVER 19.5 Points + Assists / 47.6%",
        "summaryLess": "50638385: Chet Holmgren / UNDER 19.5 Points + Assists / 52.4%",
        "maxProb": 0.524,
        "etrLine": 19.6,
        "diff": 0.10000000000000142,
        "percentageDiff": 0.005128205128205201,
        "etrPoints": 17,
        "etrAssists": 2.6,
        "etrRebounds": 9.6,
        "etrThreePtMade": 1.99,
        "etrTurnovers": 1.93,
        "etrSteals": 0.86,
        "etrBlocks": 2.04,
        "etrMinutes": 31.5,
        "etrPosition": "C",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Norman Powell",
        "statCategory": "Points",
        "dkLine": 19.5,
        "probabilityOver": "0.493",
        "probabilityUnder": "0.507",
        "moreDraftableId": 50637758,
        "lessDraftableId": 50637759,
        "summaryMore": "50637758: Norman Powell / OVER 19.5 Points / 49.3%",
        "summaryLess": "50637759: Norman Powell / UNDER 19.5 Points / 50.7%",
        "maxProb": 0.5068,
        "etrLine": 20,
        "diff": 0.5,
        "percentageDiff": 0.02564102564102564,
        "etrPoints": 20,
        "etrAssists": 1.5,
        "etrRebounds": 3.3,
        "etrThreePtMade": 3.12,
        "etrTurnovers": 1.82,
        "etrSteals": 0.82,
        "etrBlocks": 0.41,
        "etrMinutes": 32.5,
        "etrPosition": "SF/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Norman Powell",
        "statCategory": "Rebounds",
        "dkLine": 3.5,
        "probabilityOver": "0.411",
        "probabilityUnder": "0.589",
        "moreDraftableId": 50637780,
        "lessDraftableId": 50637781,
        "summaryMore": "50637780: Norman Powell / OVER 3.5 Rebounds / 41.1%",
        "summaryLess": "50637781: Norman Powell / UNDER 3.5 Rebounds / 58.9%",
        "maxProb": 0.5887,
        "etrLine": 3.3,
        "diff": -0.20000000000000018,
        "percentageDiff": -0.0571428571428572,
        "etrPoints": 20,
        "etrAssists": 1.5,
        "etrRebounds": 3.3,
        "etrThreePtMade": 3.12,
        "etrTurnovers": 1.82,
        "etrSteals": 0.82,
        "etrBlocks": 0.41,
        "etrMinutes": 32.5,
        "etrPosition": "SF/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Norman Powell",
        "statCategory": "Points + Rebounds",
        "dkLine": 23.5,
        "probabilityOver": "0.452",
        "probabilityUnder": "0.548",
        "moreDraftableId": 50637814,
        "lessDraftableId": 50637815,
        "summaryMore": "50637814: Norman Powell / OVER 23.5 Points + Rebounds / 45.2%",
        "summaryLess": "50637815: Norman Powell / UNDER 23.5 Points + Rebounds / 54.8%",
        "maxProb": 0.5479,
        "etrLine": 23.3,
        "diff": -0.1999999999999993,
        "percentageDiff": -0.00851063829787231,
        "etrPoints": 20,
        "etrAssists": 1.5,
        "etrRebounds": 3.3,
        "etrThreePtMade": 3.12,
        "etrTurnovers": 1.82,
        "etrSteals": 0.82,
        "etrBlocks": 0.41,
        "etrMinutes": 32.5,
        "etrPosition": "SF/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Points",
        "dkLine": 28.5,
        "probabilityOver": "0.493",
        "probabilityUnder": "0.507",
        "moreDraftableId": 50637776,
        "lessDraftableId": 50637777,
        "summaryMore": "50637776: Shai Gilgeous-Alexander / OVER 28.5 Points / 49.3%",
        "summaryLess": "50637777: Shai Gilgeous-Alexander / UNDER 28.5 Points / 50.7%",
        "maxProb": 0.507,
        "etrLine": 28.8,
        "diff": 0.3000000000000007,
        "percentageDiff": 0.01052631578947371,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Assists",
        "dkLine": 5.5,
        "probabilityOver": "0.609",
        "probabilityUnder": "0.391",
        "moreDraftableId": 50637778,
        "lessDraftableId": 50637779,
        "summaryMore": "50637778: Shai Gilgeous-Alexander / OVER 5.5 Assists / 60.9%",
        "summaryLess": "50637779: Shai Gilgeous-Alexander / UNDER 5.5 Assists / 39.1%",
        "maxProb": 0.6091,
        "etrLine": 6.4,
        "diff": 0.9000000000000004,
        "percentageDiff": 0.1636363636363637,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Points + Assists",
        "dkLine": 34.5,
        "probabilityOver": "0.512",
        "probabilityUnder": "0.488",
        "moreDraftableId": 50638382,
        "lessDraftableId": 50638383,
        "summaryMore": "50638382: Shai Gilgeous-Alexander / OVER 34.5 Points + Assists / 51.2%",
        "summaryLess": "50638383: Shai Gilgeous-Alexander / UNDER 34.5 Points + Assists / 48.8%",
        "maxProb": 0.5117,
        "etrLine": 35.2,
        "diff": 0.7000000000000028,
        "percentageDiff": 0.02028985507246385,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Points + Assists + Rebounds",
        "dkLine": 40.5,
        "probabilityOver": "0.506",
        "probabilityUnder": "0.494",
        "moreDraftableId": 50637810,
        "lessDraftableId": 50637811,
        "summaryMore": "50637810: Shai Gilgeous-Alexander / OVER 40.5 Points + Assists + Rebounds / 50.6%",
        "summaryLess": "50637811: Shai Gilgeous-Alexander / UNDER 40.5 Points + Assists + Rebounds / 49.4%",
        "maxProb": 0.5062,
        "etrLine": 41.1,
        "diff": 0.6000000000000014,
        "percentageDiff": 0.01481481481481485,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Points + Rebounds",
        "dkLine": 34.5,
        "probabilityOver": "0.486",
        "probabilityUnder": "0.514",
        "moreDraftableId": 50637812,
        "lessDraftableId": 50637813,
        "summaryMore": "50637812: Shai Gilgeous-Alexander / OVER 34.5 Points + Rebounds / 48.6%",
        "summaryLess": "50637813: Shai Gilgeous-Alexander / UNDER 34.5 Points + Rebounds / 51.4%",
        "maxProb": 0.5137,
        "etrLine": 34.7,
        "diff": 0.20000000000000284,
        "percentageDiff": 0.005797101449275445,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Assists + Rebounds",
        "dkLine": 11.5,
        "probabilityOver": "0.541",
        "probabilityUnder": "0.459",
        "moreDraftableId": 50637824,
        "lessDraftableId": 50637825,
        "summaryMore": "50637824: Shai Gilgeous-Alexander / OVER 11.5 Assists + Rebounds / 54.1%",
        "summaryLess": "50637825: Shai Gilgeous-Alexander / UNDER 11.5 Assists + Rebounds / 45.9%",
        "maxProb": 0.5407,
        "etrLine": 12.3,
        "diff": 0.8000000000000007,
        "percentageDiff": 0.0695652173913044,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Shai Gilgeous-Alexander",
        "statCategory": "Steals",
        "dkLine": 1.5,
        "probabilityOver": "0.495",
        "probabilityUnder": "0.505",
        "moreDraftableId": 50639420,
        "lessDraftableId": 50639421,
        "summaryMore": "50639420: Shai Gilgeous-Alexander / OVER 1.5 Steals / 49.5%",
        "summaryLess": "50639421: Shai Gilgeous-Alexander / UNDER 1.5 Steals / 50.5%",
        "maxProb": 0.5047,
        "etrLine": 1.69,
        "diff": 0.18999999999999995,
        "percentageDiff": 0.12666666666666662,
        "etrPoints": 28.8,
        "etrAssists": 6.4,
        "etrRebounds": 5.9,
        "etrThreePtMade": 2,
        "etrTurnovers": 2.28,
        "etrSteals": 1.69,
        "etrBlocks": 0.86,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Kris Dunn",
        "statCategory": "Points",
        "dkLine": 5.5,
        "probabilityOver": "0.544",
        "probabilityUnder": "0.456",
        "moreDraftableId": 50641226,
        "lessDraftableId": 50641227,
        "summaryMore": "50641226: Kris Dunn / OVER 5.5 Points / 54.4%",
        "summaryLess": "50641227: Kris Dunn / UNDER 5.5 Points / 45.6%",
        "maxProb": 0.5439,
        "etrLine": 6.5,
        "diff": 1,
        "percentageDiff": 0.18181818181818182,
        "etrPoints": 6.5,
        "etrAssists": 2.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 0.96,
        "etrTurnovers": 1.52,
        "etrSteals": 1.08,
        "etrBlocks": 0.39,
        "etrMinutes": 21.5,
        "etrPosition": "PG/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Kris Dunn",
        "statCategory": "Rebounds",
        "dkLine": 3.5,
        "probabilityOver": "0.494",
        "probabilityUnder": "0.506",
        "moreDraftableId": 50641228,
        "lessDraftableId": 50641229,
        "summaryMore": "50641228: Kris Dunn / OVER 3.5 Rebounds / 49.4%",
        "summaryLess": "50641229: Kris Dunn / UNDER 3.5 Rebounds / 50.6%",
        "maxProb": 0.5064,
        "etrLine": 3.7,
        "diff": 0.20000000000000018,
        "percentageDiff": 0.0571428571428572,
        "etrPoints": 6.5,
        "etrAssists": 2.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 0.96,
        "etrTurnovers": 1.52,
        "etrSteals": 1.08,
        "etrBlocks": 0.39,
        "etrMinutes": 21.5,
        "etrPosition": "PG/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Kris Dunn",
        "statCategory": "Points + Assists",
        "dkLine": 8.5,
        "probabilityOver": "0.516",
        "probabilityUnder": "0.484",
        "moreDraftableId": 50641232,
        "lessDraftableId": 50641233,
        "summaryMore": "50641232: Kris Dunn / OVER 8.5 Points + Assists / 51.6%",
        "summaryLess": "50641233: Kris Dunn / UNDER 8.5 Points + Assists / 48.4%",
        "maxProb": 0.5162,
        "etrLine": 9.3,
        "diff": 0.8000000000000007,
        "percentageDiff": 0.09411764705882361,
        "etrPoints": 6.5,
        "etrAssists": 2.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 0.96,
        "etrTurnovers": 1.52,
        "etrSteals": 1.08,
        "etrBlocks": 0.39,
        "etrMinutes": 21.5,
        "etrPosition": "PG/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Kris Dunn",
        "statCategory": "Points + Rebounds",
        "dkLine": 9.5,
        "probabilityOver": "0.507",
        "probabilityUnder": "0.493",
        "moreDraftableId": 50641236,
        "lessDraftableId": 50641237,
        "summaryMore": "50641236: Kris Dunn / OVER 9.5 Points + Rebounds / 50.7%",
        "summaryLess": "50641237: Kris Dunn / UNDER 9.5 Points + Rebounds / 49.3%",
        "maxProb": 0.5067999999999999,
        "etrLine": 10.2,
        "diff": 0.6999999999999993,
        "percentageDiff": 0.07368421052631571,
        "etrPoints": 6.5,
        "etrAssists": 2.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 0.96,
        "etrTurnovers": 1.52,
        "etrSteals": 1.08,
        "etrBlocks": 0.39,
        "etrMinutes": 21.5,
        "etrPosition": "PG/SG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Assists",
        "dkLine": 9.5,
        "probabilityOver": "0.453",
        "probabilityUnder": "0.547",
        "moreDraftableId": 50641676,
        "lessDraftableId": 50641677,
        "summaryMore": "50641676: James Harden / OVER 9.5 Assists / 45.3%",
        "summaryLess": "50641677: James Harden / UNDER 9.5 Assists / 54.7%",
        "maxProb": 0.5468,
        "etrLine": 9.3,
        "diff": -0.1999999999999993,
        "percentageDiff": -0.021052631578947295,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Points",
        "dkLine": 21.5,
        "probabilityOver": "0.526",
        "probabilityUnder": "0.474",
        "moreDraftableId": 50641378,
        "lessDraftableId": 50641379,
        "summaryMore": "50641378: James Harden / OVER 21.5 Points / 52.6%",
        "summaryLess": "50641379: James Harden / UNDER 21.5 Points / 47.4%",
        "maxProb": 0.5257000000000001,
        "etrLine": 22.3,
        "diff": 0.8000000000000007,
        "percentageDiff": 0.03720930232558143,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Rebounds",
        "dkLine": 6.5,
        "probabilityOver": "0.459",
        "probabilityUnder": "0.541",
        "moreDraftableId": 50637782,
        "lessDraftableId": 50637783,
        "summaryMore": "50637782: James Harden / OVER 6.5 Rebounds / 45.9%",
        "summaryLess": "50637783: James Harden / UNDER 6.5 Rebounds / 54.1%",
        "maxProb": 0.5408,
        "etrLine": 6.5,
        "diff": 0,
        "percentageDiff": 0,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Points + Assists",
        "dkLine": 31.5,
        "probabilityOver": "0.490",
        "probabilityUnder": "0.510",
        "moreDraftableId": 50641482,
        "lessDraftableId": 50641483,
        "summaryMore": "50641482: James Harden / OVER 31.5 Points + Assists / 49.0%",
        "summaryLess": "50641483: James Harden / UNDER 31.5 Points + Assists / 51.0%",
        "maxProb": 0.5096,
        "etrLine": 31.6,
        "diff": 0.10000000000000142,
        "percentageDiff": 0.0031746031746032197,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Points + Rebounds",
        "dkLine": 28.5,
        "probabilityOver": "0.496",
        "probabilityUnder": "0.504",
        "moreDraftableId": 50640646,
        "lessDraftableId": 50640647,
        "summaryMore": "50640646: James Harden / OVER 28.5 Points + Rebounds / 49.6%",
        "summaryLess": "50640647: James Harden / UNDER 28.5 Points + Rebounds / 50.4%",
        "maxProb": 0.5038,
        "etrLine": 28.8,
        "diff": 0.3000000000000007,
        "percentageDiff": 0.01052631578947371,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Points + Assists + Rebounds",
        "dkLine": 38.5,
        "probabilityOver": "0.469",
        "probabilityUnder": "0.531",
        "moreDraftableId": 50640870,
        "lessDraftableId": 50640871,
        "summaryMore": "50640870: James Harden / OVER 38.5 Points + Assists + Rebounds / 46.9%",
        "summaryLess": "50640871: James Harden / UNDER 38.5 Points + Assists + Rebounds / 53.1%",
        "maxProb": 0.5313,
        "etrLine": 38.1,
        "diff": -0.3999999999999986,
        "percentageDiff": -0.010389610389610353,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "James Harden",
        "statCategory": "Assists + Rebounds",
        "dkLine": 16.5,
        "probabilityOver": "0.411",
        "probabilityUnder": "0.589",
        "moreDraftableId": 50641238,
        "lessDraftableId": 50641239,
        "summaryMore": "50641238: James Harden / OVER 16.5 Assists + Rebounds / 41.1%",
        "summaryLess": "50641239: James Harden / UNDER 16.5 Assists + Rebounds / 58.9%",
        "maxProb": 0.5892,
        "etrLine": 15.8,
        "diff": -0.6999999999999993,
        "percentageDiff": -0.04242424242424238,
        "etrPoints": 22.3,
        "etrAssists": 9.3,
        "etrRebounds": 6.5,
        "etrThreePtMade": 3.08,
        "etrTurnovers": 4.98,
        "etrSteals": 1.11,
        "etrBlocks": 0.69,
        "etrMinutes": 34.5,
        "etrPosition": "PG",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Ivica Zubac",
        "statCategory": "Points",
        "dkLine": 15.5,
        "probabilityOver": "0.490",
        "probabilityUnder": "0.510",
        "moreDraftableId": 50637760,
        "lessDraftableId": 50637761,
        "summaryMore": "50637760: Ivica Zubac / OVER 15.5 Points / 49.0%",
        "summaryLess": "50637761: Ivica Zubac / UNDER 15.5 Points / 51.0%",
        "maxProb": 0.5097,
        "etrLine": 15.7,
        "diff": 0.1999999999999993,
        "percentageDiff": 0.012903225806451568,
        "etrPoints": 15.7,
        "etrAssists": 2.7,
        "etrRebounds": 13.2,
        "etrThreePtMade": 0.01,
        "etrTurnovers": 2.19,
        "etrSteals": 0.47,
        "etrBlocks": 1.33,
        "etrMinutes": 34,
        "etrPosition": "C",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Ivica Zubac",
        "statCategory": "Points + Rebounds",
        "dkLine": 28.5,
        "probabilityOver": "0.494",
        "probabilityUnder": "0.506",
        "moreDraftableId": 50637860,
        "lessDraftableId": 50637861,
        "summaryMore": "50637860: Ivica Zubac / OVER 28.5 Points + Rebounds / 49.4%",
        "summaryLess": "50637861: Ivica Zubac / UNDER 28.5 Points + Rebounds / 50.6%",
        "maxProb": 0.5064,
        "etrLine": 28.9,
        "diff": 0.3999999999999986,
        "percentageDiff": 0.014035087719298196,
        "etrPoints": 15.7,
        "etrAssists": 2.7,
        "etrRebounds": 13.2,
        "etrThreePtMade": 0.01,
        "etrTurnovers": 2.19,
        "etrSteals": 0.47,
        "etrBlocks": 1.33,
        "etrMinutes": 34,
        "etrPosition": "C",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Luguentz Dort",
        "statCategory": "Points",
        "dkLine": 9.5,
        "probabilityOver": "0.451",
        "probabilityUnder": "0.549",
        "moreDraftableId": 50637762,
        "lessDraftableId": 50637763,
        "summaryMore": "50637762: Luguentz Dort / OVER 9.5 Points / 45.1%",
        "summaryLess": "50637763: Luguentz Dort / UNDER 9.5 Points / 54.9%",
        "maxProb": 0.5491,
        "etrLine": 9.4,
        "diff": -0.09999999999999964,
        "percentageDiff": -0.010526315789473648,
        "etrPoints": 9.4,
        "etrAssists": 1.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 1.82,
        "etrTurnovers": 0.82,
        "etrSteals": 0.94,
        "etrBlocks": 0.53,
        "etrMinutes": 27,
        "etrPosition": "SF/SG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Luguentz Dort",
        "statCategory": "Points + Rebounds",
        "dkLine": 12.5,
        "probabilityOver": "0.500",
        "probabilityUnder": "0.500",
        "moreDraftableId": 50637792,
        "lessDraftableId": 50637793,
        "summaryMore": "50637792: Luguentz Dort / OVER 12.5 Points + Rebounds / 50.0%",
        "summaryLess": "50637793: Luguentz Dort / UNDER 12.5 Points + Rebounds / 50.0%",
        "maxProb": 0.5002,
        "etrLine": 13.100000000000001,
        "diff": 0.6000000000000014,
        "percentageDiff": 0.04800000000000011,
        "etrPoints": 9.4,
        "etrAssists": 1.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 1.82,
        "etrTurnovers": 0.82,
        "etrSteals": 0.94,
        "etrBlocks": 0.53,
        "etrMinutes": 27,
        "etrPosition": "SF/SG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Luguentz Dort",
        "statCategory": "Rebounds",
        "dkLine": 3.5,
        "probabilityOver": "0.493",
        "probabilityUnder": "0.507",
        "moreDraftableId": 50643440,
        "lessDraftableId": 50643441,
        "summaryMore": "50643440: Luguentz Dort / OVER 3.5 Rebounds / 49.3%",
        "summaryLess": "50643441: Luguentz Dort / UNDER 3.5 Rebounds / 50.7%",
        "maxProb": 0.5071,
        "etrLine": 3.7,
        "diff": 0.20000000000000018,
        "percentageDiff": 0.0571428571428572,
        "etrPoints": 9.4,
        "etrAssists": 1.8,
        "etrRebounds": 3.7,
        "etrThreePtMade": 1.82,
        "etrTurnovers": 0.82,
        "etrSteals": 0.94,
        "etrBlocks": 0.53,
        "etrMinutes": 27,
        "etrPosition": "SF/SG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Cason Wallace",
        "statCategory": "Points",
        "dkLine": 6.5,
        "probabilityOver": "0.490",
        "probabilityUnder": "0.510",
        "moreDraftableId": 50644260,
        "lessDraftableId": 50644261,
        "summaryMore": "50644260: Cason Wallace / OVER 6.5 Points / 49.0%",
        "summaryLess": "50644261: Cason Wallace / UNDER 6.5 Points / 51.0%",
        "maxProb": 0.5101,
        "etrLine": 6.9,
        "diff": 0.40000000000000036,
        "percentageDiff": 0.06153846153846159,
        "etrPoints": 6.9,
        "etrAssists": 1.5,
        "etrRebounds": 3,
        "etrThreePtMade": 1.27,
        "etrTurnovers": 0.47,
        "etrSteals": 1.06,
        "etrBlocks": 0.5,
        "etrMinutes": 23,
        "etrPosition": "PG",
        "etrTeam": "OKC",
        "etrOpponent": "LAC"
    },
    {
        "player": "Terance Mann",
        "statCategory": "Points + Rebounds",
        "dkLine": 11.5,
        "probabilityOver": "0.469",
        "probabilityUnder": "0.531",
        "moreDraftableId": 50640852,
        "lessDraftableId": 50640853,
        "summaryMore": "50640852: Terance Mann / OVER 11.5 Points + Rebounds / 46.9%",
        "summaryLess": "50640853: Terance Mann / UNDER 11.5 Points + Rebounds / 53.1%",
        "maxProb": 0.5315,
        "etrLine": 11.6,
        "diff": 0.09999999999999964,
        "percentageDiff": 0.008695652173913012,
        "etrPoints": 8.2,
        "etrAssists": 1.7,
        "etrRebounds": 3.4,
        "etrThreePtMade": 0.95,
        "etrTurnovers": 0.89,
        "etrSteals": 0.65,
        "etrBlocks": 0.28,
        "etrMinutes": 23.5,
        "etrPosition": "SG/SF",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Terance Mann",
        "statCategory": "Points",
        "dkLine": 7.5,
        "probabilityOver": "0.519",
        "probabilityUnder": "0.481",
        "moreDraftableId": 50640850,
        "lessDraftableId": 50640851,
        "summaryMore": "50640850: Terance Mann / OVER 7.5 Points / 51.9%",
        "summaryLess": "50640851: Terance Mann / UNDER 7.5 Points / 48.1%",
        "maxProb": 0.5188999999999999,
        "etrLine": 8.2,
        "diff": 0.6999999999999993,
        "percentageDiff": 0.09333333333333324,
        "etrPoints": 8.2,
        "etrAssists": 1.7,
        "etrRebounds": 3.4,
        "etrThreePtMade": 0.95,
        "etrTurnovers": 0.89,
        "etrSteals": 0.65,
        "etrBlocks": 0.28,
        "etrMinutes": 23.5,
        "etrPosition": "SG/SF",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    },
    {
        "player": "Terance Mann",
        "statCategory": "Rebounds",
        "dkLine": 3.5,
        "probabilityOver": "0.435",
        "probabilityUnder": "0.565",
        "moreDraftableId": 50641230,
        "lessDraftableId": 50641231,
        "summaryMore": "50641230: Terance Mann / OVER 3.5 Rebounds / 43.5%",
        "summaryLess": "50641231: Terance Mann / UNDER 3.5 Rebounds / 56.5%",
        "maxProb": 0.5645,
        "etrLine": 3.4,
        "diff": -0.10000000000000009,
        "percentageDiff": -0.0285714285714286,
        "etrPoints": 8.2,
        "etrAssists": 1.7,
        "etrRebounds": 3.4,
        "etrThreePtMade": 0.95,
        "etrTurnovers": 0.89,
        "etrSteals": 0.65,
        "etrBlocks": 0.28,
        "etrMinutes": 23.5,
        "etrPosition": "SG/SF",
        "etrTeam": "LAC",
        "etrOpponent": "OKC"
    }
];

// TODO: MAX_EXPSOURE LOGIC IS STILL ROUGH

// PLAN
// V1: Bucket by game; Analyze over under; Generate slips of all sizes
// --> Try to target star players
// --> Avoid multiple 2+ points selections on same team
// V2: Bet across games with best overall lines --> OR WRITE A MIXIN TO MIX BEST PICKS INTO EXISTING SLIPS FROM V1

// TODO: CARRY FORWARD UNABTED RESPONSE INTO DK SCRIPT --> DK LINES CHANGE TOO QUICKLY

const GAMES_TO_SKIP = new Set([]);
const GAMES_TO_TARGET = new Set([]); // new Set(['BOS/CHA', 'CLE/ORL', 'DET/NYK']);
const CONFIG = {

    // DO NOT UNCOMMENT FOR V1 >>>>
    // FOR TWO AND THREE LEG SLIPS SHOULD INSTEAD FOCUS ON THE BEST PICKS
    // 2: { MAX_EXPOSURE: 0.55, numberOfSlips: 20, amountPerSlip: 5 },
    // 3: { MAX_EXPOSURE: 0.55, numberOfSlips: 20, amountPerSlip: 5 },
    // DO NOT UNCOMMENT FOR V1 ^^^^^

    // TODO: CHECK LIQUIDITY BY POOL SIZE
    // 3: { overSlips: 0, underSlips: 20, amountPerSlip: 3 },
    // 4: { overSlips: 15, underSlips: 80, amountPerSlip: 5 },
    // 5: { overSlips: 2, underSlips: 10, amountPerSlip: 5 },
    6: { overSlips: 0, underSlips: 20, amountPerSlip: 5 },
};

const IS_MIXUP_CONFIG_ENABLED = false;
const OVER_THRESHOLD = 0.58;
const UNDER_THRESHOLD = 0.57;
const MIX_UP_CONFIG = {
    // TODO: CONSIDER WRITING SOME LOGIC TO TAKE 4 OR 5 LEGS FROM ONE GAME AND MIX IN 1-2 LEGS FROM ANOTHER GAME

    3: { slips: 20, amountPerSlip: 40, overThreshold: OVER_THRESHOLD, underThreshold: UNDER_THRESHOLD },
    4: { slips: 20, amountPerSlip: 25, overThreshold: OVER_THRESHOLD, underThreshold: UNDER_THRESHOLD },
    // 5: { slips: 10, amountPerSlip: 7, overThreshold: OVER_THRESHOLD, underThreshold: UNDER_THRESHOLD },
    6: { slips: 50, amountPerSlip: 5, overThreshold: OVER_THRESHOLD, underThreshold: UNDER_THRESHOLD },
}

const [P, A, R] = ['PTS', 'AST', 'REB'];
const SIMILAR_CATEGORIES_MAPPER = {
    'Points + Assists + Rebounds': P,
    'Points + Assists': P,
    'Points + Rebounds': P,
    'Points': P,
    'Assists + Rebounds': A,
    'Assists': A,
    'Rebounds': R,
    'Assists + Rebounds': R,
};

function bucketLinesByGame(analyzedPicks) {
    return analyzedPicks.reduce((acc, cv) => {
        const teamsSorted = [cv.etrTeam, cv.etrOpponent].sort().join('/');
        if (acc[teamsSorted]) {
            acc[teamsSorted].push(cv);
        } else {
            acc[teamsSorted] = [cv];
        }
        return acc;
    }, {});
}

function bucketByOverUnder(bucketedByGame) {
    return Object.entries(bucketedByGame).reduce((acc, [game, postedLines]) => {
        const [OVER, UNDER] = ["O", "U"];
        const buckets = postedLines.reduce((acc, cv) => {
            const overUnder = parseFloat(cv.probabilityOver) > 0.5 ? OVER : UNDER;
            acc[overUnder].push(cv);
            return acc;
        }, { [OVER]: [], [UNDER]: [] });
        acc[game] = {
            [OVER]: buckets[OVER].sort((a, b) => b.maxProb - a.maxProb),
            [UNDER]: buckets[UNDER].sort((a, b) => b.maxProb - a.maxProb),
        }
        return acc;
    }, {});
}

function optimizer(bucketOfPicks, { numberOfLegsPerSlip, amountPerSlip }, countOverride = false) {
    if (bucketOfPicks.length < 8) {
        return [];
    }

    try {
        const slips = [];

        // TODO: SWITCH THIS BACK TO numberOfSlips LATER? Max exposure in filtering as of now
        while (slips.length < (countOverride ? countOverride : 200)) {
            const slip = [];
            const playersAlreadyPushed = new Set([]);
            const teamsAlreadyPushed = new Set([]);
            let i = 0;

            while (slip.length < numberOfLegsPerSlip) {
                i++;

                // This catches infinite loops; need non hacky solution
                if (i > 2000) {
                    // as of now this could be caused because only one team is posted; skip for now
                    // or could be because there aren't enough picks to make a slip

                    return []
                }

                const randomIndex = Math.floor(Math.random() * bucketOfPicks.length);
                const potentialPick = bucketOfPicks[randomIndex];

                if (
                    playersAlreadyPushed.has(potentialPick.player)
                    || (teamsAlreadyPushed.size === 1 && teamsAlreadyPushed.has(potentialPick.etrTeam))
                ) {
                    continue;
                }

                if (slip.length === numberOfLegsPerSlip) {
                    break;
                } else {
                    slip.push(potentialPick);
                    playersAlreadyPushed.add(potentialPick.player);
                    teamsAlreadyPushed.add(potentialPick.etrTeam);
                }
            }
            slips.push({ slip: slip, amount: amountPerSlip });
        }
        return slips;
    } catch (error) {
        debugger;
    }
}

function optimizeByBucket(bucketedByGameAndOverUnder) {
    try {
        return Object.entries(bucketedByGameAndOverUnder).reduce((acc, [game, overUnderBucketsObj]) => {
            if (GAMES_TO_TARGET.size === 0 || GAMES_TO_TARGET.has(game)) {
                acc[game] = Object.entries(overUnderBucketsObj).reduce((acc, [overOrUnder, bucketOfPicks]) => {
                    acc[overOrUnder] = Object.entries(CONFIG).reduce((acc, [numberOfLegsPerSlip, { amountPerSlip }]) => {
                        acc[numberOfLegsPerSlip] = optimizer(bucketOfPicks, { numberOfLegsPerSlip, amountPerSlip });
                        return acc;
                    }, {});
                    return acc;
                }, {});
            }
            return acc;
        }, {});
    } catch (error) {
        debugger;
    }
}

function getMaxExposure(numberOfLegsPerSlip, originalOverUnderBucketForGame) {
    const numberOfLegs = parseInt(numberOfLegsPerSlip);
    const ratioOfLegsToOptions = numberOfLegs / originalOverUnderBucketForGame.length;
    const maxExposure = Math.round(ratioOfLegsToOptions * 3 * 10) / 10;
    return Math.min(maxExposure, 0.37);
}

function filterByMaxExposure(numberOfLegsPerSlip, pickArray, overOrUnder, originalOverUnderBucketForGame) {
    const likelihoodOfWinningTuples = pickArray.map((slipObject) => (
        [
            slipObject.slip.reduce((acc, cv) => cv.maxProb * acc, 1),
            slipObject
        ]
    ));
    const sorted = likelihoodOfWinningTuples.sort((a, b) => b[0] - a[0]);
    const { overSlips, underSlips } = CONFIG[numberOfLegsPerSlip];
    const maxExposure = getMaxExposure(numberOfLegsPerSlip, originalOverUnderBucketForGame);
    const numberOfSlips = overOrUnder === 'O' ? overSlips : underSlips
    const maxUses = Math.ceil(numberOfSlips * maxExposure);

    const exposures = {};
    const filtered = sorted.filter(([winLikelihood, { slip, amount }]) => {
        const filteredSlip = slip.filter(s => {
            const category = SIMILAR_CATEGORIES_MAPPER[s.statCategory] || s.statCategory;
            const key = `${category}: ${s.player}`;
            return exposures[key] === undefined || exposures[key] < maxUses;
        });

        const areAllLegsBelowMaxExposure = filteredSlip.length === slip.length;

        if (areAllLegsBelowMaxExposure) {
            slip.forEach(s => {
                const category = SIMILAR_CATEGORIES_MAPPER[s.statCategory] || s.statCategory;
                const key = `${category}: ${s.player}`;
                if (key in exposures) {
                    exposures[key] += 1;
                } else {
                    exposures[key] = 1;
                }
            });
            return true;
        }
        return false;
    });

    return filtered.slice(0, numberOfSlips);
}

function filterSlips(optimizedSlipsByGame, bucketedByGameAndOverUnder) {
    return Object.entries(optimizedSlipsByGame).reduce((acc, [game, overUnderBucketsObj]) => {
        const overUnderBucketsForGame = bucketedByGameAndOverUnder[game];
        acc[game] = Object.entries(overUnderBucketsObj).reduce((acc, [overOrUnder, bucketOfPicks]) => {
            const originalOverUnderBucketForGame = overUnderBucketsForGame[overOrUnder];
            acc[overOrUnder] = Object.entries(bucketOfPicks).reduce((acc, [numberOfLegsPerSlip, pickArray]) => {
                acc[numberOfLegsPerSlip] = filterByMaxExposure(numberOfLegsPerSlip, pickArray, overOrUnder, originalOverUnderBucketForGame);
                return acc;
            }, {});
            return acc;
        }, {});
        return acc;
    }, {});
}

function mapToEntryFormat(slips) {
    const formattedSlips = []
    Object.entries(slips).forEach(([game, overUnderBucketsObj]) => {
        Object.entries(overUnderBucketsObj).forEach(([overOrUnder, bucketOfPicks]) => {
            Object.entries(bucketOfPicks).forEach(([numberOfLegsPerSlip, pickArray]) => {
                pickArray.forEach(([likelihoodOfWinning, { slip, amount }]) => {
                    const formattedSlip = slip.map(s => {
                        const key = parseFloat(s.probabilityOver) > 0.5 ? 'summaryMore' : 'summaryLess';
                        const entryString = s[key];
                        return entryString;
                    });
                    const adjustedSlip = ["one", "two", "three", "four", "five", "six"].reduce((acc, cv, idx) => {
                        if (idx < formattedSlip.length) {
                            acc[cv] = formattedSlip[idx];
                        } else {
                            acc[cv] = "";
                        }
                        acc['amount'] = amount;
                        return acc;
                    }, {});
                    formattedSlips.push(adjustedSlip);
                });
            });
        });
    });
    return formattedSlips;
}

function summarize(readyToSubmit) {
    const total = readyToSubmit.reduce((acc, { amount }) => {
        acc += amount;
        return acc;
    }, 0);

    return total;
    // return { ...summary, total: Object.entries(summary).reduce((acc, [_, amount]) => acc + amount, 0) };
}

// TODO: NEED TO VALIDATE THIS
function filterMixupSlips(mixupSlips) {
    return mixupSlips.filter(({ slip }) => {
        // Group picks by game
        const gameGroups = slip.reduce((acc, pick) => {
            const gameKey = [pick.etrTeam, pick.etrOpponent].sort().join('/');
            if (!acc[gameKey]) {
                acc[gameKey] = [];
            }
            acc[gameKey].push(pick);
            return acc;
        }, {});

        // Check each game's picks
        return Object.values(gameGroups).every(gamePicks => {
            // If only 1 pick from this game, it's valid
            if (gamePicks.length === 1) return true;

            // Check if all picks are either overs or unders
            const firstPickIsOver = parseFloat(gamePicks[0].probabilityOver) > 0.5;
            return gamePicks.every(pick =>
                (parseFloat(pick.probabilityOver) > 0.5) === firstPickIsOver
            );
        });
    });
}

function slipsByGame(analyzedPicks) {
    if (IS_MIXUP_CONFIG_ENABLED) {
        const filteredAnalyedPicks = analyzedPicks.filter(pick => {
            const isOver = parseFloat(pick.probabilityOver) > 0.5;
            if (isOver) {
                return parseFloat(pick.probabilityOver) >= MIX_UP_CONFIG['6'].overThreshold;
            } else {
                return (1 - parseFloat(pick.probabilityOver)) >= MIX_UP_CONFIG['6'].underThreshold;
            }
        });

        const mixupSlips = Object.entries(MIX_UP_CONFIG).reduce((acc, [numberOfLegs, config]) => {
            const slipsForThisLength = optimizer(filteredAnalyedPicks, {
                numberOfLegsPerSlip: parseInt(numberOfLegs),
                amountPerSlip: config.amountPerSlip
            }, config.slips);
            acc[numberOfLegs] = slipsForThisLength;
            return acc;
        }, {});

        const filteredMixupSlips = Object.entries(mixupSlips).reduce((acc, [numberOfLegs, slips]) => {
            acc[numberOfLegs] = filterMixupSlips(slips);
            return acc;
        }, {});

        // Trim slips to match configured sizes
        const trimmedMixupSlips = Object.entries(filteredMixupSlips).reduce((acc, [numberOfLegs, slips]) => {
            const configuredSlipCount = MIX_UP_CONFIG[numberOfLegs].slips;
            acc[numberOfLegs] = slips.slice(0, configuredSlipCount);
            return acc;
        }, {});

        const combinedSlips = Object.values(trimmedMixupSlips).flat();
        const readyToSubmit = mapToEntryFormat(combinedSlips);
        const summary = summarize(readyToSubmit);
        debugger;

        return;
    }

    const bucketedByGame = bucketLinesByGame(analyzedPicks);
    const bucketedByGameAndOverUnder = bucketByOverUnder(bucketedByGame);
    const optimizedSlipsByGame = optimizeByBucket(bucketedByGameAndOverUnder);
    const filteredSlips = filterSlips(optimizedSlipsByGame, bucketedByGameAndOverUnder);

    const readyToSubmit = mapToEntryFormat(filteredSlips);
    const summary = summarize(readyToSubmit);

    // TODO: TRIM BAD PICKS BELOW X THRESHOLD? EX: .55^3 = .166 --> Decide on this later
    debugger;
}


slipsByGame(analyzedPicks);
